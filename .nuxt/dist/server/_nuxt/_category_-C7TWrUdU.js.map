{"version":3,"file":"_category_-C7TWrUdU.js","sources":["../../../../components/FiltersVue.vue","../../../../virtual:public?%2Fimages%2Ffilter.svg","../../../../pages/categories/[category].vue"],"sourcesContent":["<script setup lang=\"ts\">\n\nimport { useProductsStore } from '#imports';\n\nimport type { Filters } from '~/types/filters';\n\ndefineProps<{filters: Filters}>();\n\nconst brandsList = ref<string[]>([\n    'adidas', \n    'new-balance', \n    'puma', \n    'reebok', \n    'carhartt', \n    'nike', \n    'the-north-face', \n    'stone-island'\n]);\nconst gendersList = ref<{gender: string; title: string}[]>([\n    {\n        gender: 'male',\n        title: 'Мужской'\n    },{\n        gender: 'female',\n        title: 'Женский'\n    },{\n        gender: 'unisex',\n        title: 'Унисекс'\n    },\n])\nconst ProductsStore = useProductsStore();\n\n\n//price gender color brand\n\n</script>\n<template>\n    <div class=\"filters modal\">    \n        <div class=\"filters__inner\">\n            <div class=\"filters__block\">\n                <span class=\"filters__label\">\n                    Пол: \n                </span>\n                <select v-model=\"filters.gender\" placeholder=\"Не выбрано\"\n                    name=\"gender\" id=\"gender\" class=\"filters__select\">\n                    <option value=\"\" selected placeholder=\"Не выбрано\">Не выбрано</option>\n                    <option v-for=\"gender,i in gendersList\" :key=\"i\"\n                    :value=\"gender.gender\">{{ gender.title }}</option>\n                    <!-- <option value=\"female\">Женский</option>\n                    <option value=\"unisex\">Унисекс</option> -->\n                </select>\n            </div>\n            <div class=\"filters__block\">\n                <span class=\"filters__label\">\n                    Бренд: \n                </span>\n                <select v-model=\"filters.brand\" placeholder=\"Не выбрано\"\n                    name=\"brand\" id=\"brand\" class=\"filters__select\">\n                    <option value=\"\" selected placeholder=\"Не выбрано\">Не выбрано</option>\n                    <option v-for=\"brand,i in brandsList\" :key=\"i\"\n                    :value=\"brand\" class=\"capitalize\">{{ brand.split('-').join(' ') }}</option>\n                </select>\n            </div>\n            <div class=\"filters__block\">\n                <span class=\"filters__label block mb-[10px]\">\n                   Цена \n                </span>\n                <input \n                v-model=\"filters.minPrice\" \n                type=\"number\" \n                class=\"filters__input\" \n                placeholder=\"От\"\n                id=\"min_price\"\n                name=\"min_price\"\n                inputmode=\"numeric\"\n                pattern=\"[0-9]*\">\n                <input \n                v-model=\"filters.maxPrice\" \n                type=\"number\" \n                class=\"filters__input\" \n                placeholder=\"До\"\n                id=\"max_price\"\n                name=\"max_price\"\n                inputmode=\"numeric\"\n                pattern=\"[0-9]*\">\n            </div>\n            <slot name=\"button\">\n\n            </slot>\n        </div>\n        <button \n        @click=\"ProductsStore.closeFilters\"\n        class=\"filters__close-btn modal__close-btn\">\n            <img src=\"/images/close-icon.svg\" alt=\"Закрыть\" class=\"filters__close-icon modal__close-icon\">\n        </button>\n    </div>\n    \n</template>\n\n<style lang=\"sass\" scoped>\n.filters\n    padding-inline: 20px\n    &__inner\n        display: flex\n        flex-direction: column\n        width: 100%\n        height: 100%\n        max-width: 500px\n        justify-content: flex-start\n        align-content: center\n        gap: 20px\n    &__block\n        margin-bottom: 40px\n    &__label, &__input, &__select\n        font-size: 22px\n    &__input\n        display: inline-block\n        width: 100px\n        margin-right: 20px\n        padding: 5px\n        border-bottom: 1px solid #000\n        transition: all .2s\n        &:focus\n            outline: none\n            border-bottom: 5px solid #000\n    &__select\n        background-color: #fff\n        text-transform: capitalize\n\noption\n    text-transform: capitalize\n</style>","import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/images/filter.svg\")","<script setup lang=\"ts\">\n\nimport type { LocationQueryRaw } from 'vue-router';\nimport { useProductsStore } from '~/stores/products.store';\nimport type { Filters } from '~/types/filters';\n\ndefinePageMeta({\n    middleware: ['categories-middleware'],\n})\n\nconst route = useRoute();\nconst router = useRouter();\nconst ProductsStore = useProductsStore();\nconst title = ref<string | string[] | undefined>('');\nconst filters = ref<Filters>({\n    gender: <'male' | 'female' | 'unisex' | ''>(route.query.gender || ''),\n    brand: route.query.brand || '',\n    color: route.params.color || null,\n    minPrice: route.query.minPrice || null,\n    maxPrice: route.query.maxPrice || null,\n});\nconst filtersQuantity = ref(getFiltersQuantity());\n\n\nonMounted(() => {\n    ProductsStore.isClient = true;\n});\n\n\n//Заголовок страницы\ntitle.value = ProductsStore.getCategoryTitle(route.params.category);\n\nfunction acceptFilters() {\n    let query: LocationQueryRaw = { };\n    if(filters.value.brand) {\n        query.brand = filters.value.brand;\n    }\n    if(filters.value.gender) {\n        query.gender = filters.value.gender;\n    }\n    if(filters.value.minPrice) {\n        query.minPrice = filters.value.minPrice;\n    }\n    if(filters.value.maxPrice) {\n        query.maxPrice = filters.value.maxPrice;\n    }\n\n    if(query.minPrice && query.maxPrice) {\n        if(query.minPrice > query.maxPrice) {\n            query.minPrice = null;\n            query.maxPrice = null;\n        }\n    }\n    //Добавляем запрос в строку браузера\n    router.push({ query });\n    //Применяем фильтры\n    ProductsStore.setFilters(route.params.category, filters.value);\n    //Закрываем модальное окно\n    ProductsStore.closeFilters();\n    //Обновляем счетчик применных фильтров\n    filtersQuantity.value = getFiltersQuantity();\n    \n}\n\nfunction getFiltersQuantity() {\n    //Сколько фильтров применено\n    let count = 0;\n    for(const [key, value] of Object.entries(filters.value)) {\n        if(value) count++;\n    }\n    return count;\n}\n\n\nfunction disableFilters() {\n    filters.value = {\n        brand: '',\n        gender: '',\n        minPrice: null,\n        maxPrice: null,\n    }\n    navigateTo({query: {}});\n}\n\n</script>\n\n<template>\n    \n    <div v-if=\"ProductsStore.isClient\"\n    class=\"categories page\">\n        <ScrollVue>\n            <template #content>\n                    <div class=\"categories__nav page-nav\">\n                        <!-- Fix header -->\n                        <h1 class=\"categories__title page-title\">{{ $t(route.params.category.toString()) }}</h1>\n                        <button \n                        @click=\"ProductsStore.openFilters\"\n                        class=\"categories__filter-btn\">\n                            <span v-if=\"filtersQuantity > 0\"\n                            class=\"categories__filter-quantity\">\n                                {{ filtersQuantity }}\n                            </span>\n                            <img src=\"/images/filter.svg\" alt=\"Фильтры\" class=\"categories__filter-icon\">\n                        </button>\n                    </div>\n                    <template v-if=\"ProductsStore.currentProducts.length > 0\">\n                        <ProductsList :products=\"ProductsStore.currentProducts\" />\n                    </template>\n                    <template v-else>\n                        <AlertVue >\n                            <template #message>\n                                <span class=\"alert-message text-[16px] test-rose-500\">\n                                    Извините, по вашему запросу ничего найдено.\n                                </span>\n                            </template>\n                        </AlertVue>\n                    </template>\n            </template>\n        </ScrollVue>\n        <Transition name=\"modal\">\n            <FiltersVue v-show=\"ProductsStore.areFiltersOpened\" :filters=\"filters\">\n                <template #button>\n                    <button @click=\"acceptFilters\"\n                    class=\"primary-button filter-accept-btn\">Применить</button>\n                    <button @click=\"disableFilters\"\n                    class=\"filter-disable-btn secondary-btn\">Убрать все фильтры</button>\n                </template>\n            </FiltersVue>\n        </Transition>\n        \n    </div>\n</template>\n\n<style lang=\"sass\" scoped>\n.categories\n    &__nav\n        display: flex\n        justify-content: space-between\n        align-items: center\n        max-width: 1280px\n        border-bottom: 2px solid #000\n        margin: 0 auto 30px auto\n    &__filter-btn\n        position: relative\n    &__filter-quantity\n        position: absolute\n        top: -10px\n        right: -5px\n        display: block\n        width: 15px\n        height: 15px\n        font-size: 13px\n        color: #fff\n        background-color: #000\n        border-radius: 50%\n    &__filter-icon\n        width: 22px\n        @media screen and (min-width: 768px)\n            width: 28px\n        @media screen and (min-width: 1280px)\n            width: 35px\n.filter-accept-btn\n    margin-top: auto\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,UAAM,aAAa,IAAc;AAAA,MAC7B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,CACH;AACD,UAAM,cAAc,IAAuC;AAAA,MACvD;AAAA,QACI,QAAQ;AAAA,QACR,OAAO;AAAA,MACX;AAAA,MAAE;AAAA,QACE,QAAQ;AAAA,QACR,OAAO;AAAA,MACX;AAAA,MAAE;AAAA,QACE,QAAQ;AAAA,QACR,OAAO;AAAA,MACX;AAAA,IAAA,CACH;AACqB,qBAAiB;;;;;;;;;;;;;;;;;;;;;;;AC9BgB,MAAe,aAAA,gBAAgB,oBAAoB;;;;;ACU1G,UAAM,QAAQ;AACd,UAAM,SAAS;AACf,UAAM,gBAAgB;AAChB,UAAA,QAAQ,IAAmC,EAAE;AACnD,UAAM,UAAU,IAAa;AAAA,MACzB,QAA4C,MAAM,MAAM,UAAU;AAAA,MAClE,OAAO,MAAM,MAAM,SAAS;AAAA,MAC5B,OAAO,MAAM,OAAO,SAAS;AAAA,MAC7B,UAAU,MAAM,MAAM,YAAY;AAAA,MAClC,UAAU,MAAM,MAAM,YAAY;AAAA,IAAA,CACrC;AACK,UAAA,kBAAkB,IAAI,mBAAA,CAAoB;AAShD,UAAM,QAAQ,cAAc,iBAAiB,MAAM,OAAO,QAAQ;AAElE,aAAS,gBAAgB;AACrB,UAAI,QAA0B,CAAA;AAC3B,UAAA,QAAQ,MAAM,OAAO;AACd,cAAA,QAAQ,QAAQ,MAAM;AAAA,MAChC;AACG,UAAA,QAAQ,MAAM,QAAQ;AACf,cAAA,SAAS,QAAQ,MAAM;AAAA,MACjC;AACG,UAAA,QAAQ,MAAM,UAAU;AACjB,cAAA,WAAW,QAAQ,MAAM;AAAA,MACnC;AACG,UAAA,QAAQ,MAAM,UAAU;AACjB,cAAA,WAAW,QAAQ,MAAM;AAAA,MACnC;AAEG,UAAA,MAAM,YAAY,MAAM,UAAU;AAC9B,YAAA,MAAM,WAAW,MAAM,UAAU;AAChC,gBAAM,WAAW;AACjB,gBAAM,WAAW;AAAA,QACrB;AAAA,MACJ;AAEO,aAAA,KAAK,EAAE,MAAA,CAAO;AAErB,oBAAc,WAAW,MAAM,OAAO,UAAU,QAAQ,KAAK;AAE7D,oBAAc,aAAa;AAE3B,sBAAgB,QAAQ;IAE5B;AAEA,aAAS,qBAAqB;AAE1B,UAAI,QAAQ;AACF,iBAAA,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,QAAQ,KAAK,GAAG;AAClD,YAAA;AAAO;AAAA,MACd;AACO,aAAA;AAAA,IACX;AAGA,aAAS,iBAAiB;AACtB,cAAQ,QAAQ;AAAA,QACZ,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,UAAU;AAAA,MAAA;AAEd,iBAAW,EAAC,OAAO,CAAC,EAAA,CAAE;AAAA,IAC1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}